# Meta-Awareness 系統 Issues 追蹤

## 問題追蹤格式
每個問題項目應包含：
- ID: 唯一識別碼
- 創建日期
- 狀態 (Open/In Progress/Resolved/Closed)
- 優先級 (High/Medium/Low)
- 問題類型 (Bug/Feature/Enhancement/Security)
- 描述
- 影響範圍
- 建議解決方案
- 相關討論/更新記錄

## 當前問題

### #001 系統架構模組化
- **創建日期**: 2025-06-16
- **狀態**: Resolved in v2.0
- **優先級**: Medium
- **類型**: Enhancement
- **描述**: DailyReport.gs 模組化程度不足，代碼結構需要優化
- **影響範圍**: 代碼維護性、擴展性
- **建議解決方案**: 
  - 將 DailyReport.gs 重構為更小的功能模組
  - 實現更清晰的職責分離
  - 建立統一的接口規範
- **更新記錄**:
  - 2025-06-17: 已透過 v2.0 微服務架構徹底解決。相關服務包括 `ReportOrchestrator`, `EventBus`, `SheetAdapter` 等。

### #002 Google Form/Sheet 表頭同步
- **創建日期**: 2025-06-16
- **狀態**: Resolved in v2.0
- **優先級**: High
- **類型**: Bug
- **描述**: 當 Google Form 修改導致 Sheet headers 變更時，腳本無法自動適應
- **影響範圍**: 數據收集、報告生成
- **建議解決方案**:
  - 實現動態表頭映射機制
  - 建立配置驅動的表頭映射系統
  - 添加表頭變更檢測和自動適應功能
- **更新記錄**:
  - 2025-06-17: 已透過 `SchemaService.js` 和 `SheetAdapter.js` 解決。系統現在可以動態映射表頭並偵測變更。

### #003 數據隱私與第三方 API
- **創建日期**: 2025-06-16
- **狀態**: Resolved in v2.0
- **優先級**: High
- **類型**: Security
- **描述**: 當前需要將個人數據發送至第三方平台（如 DeepSeek），存在隱私風險
- **影響範圍**: 用戶數據安全、系統架構
- **建議解決方案**:
  - 短期: 實現數據匿名化處理
  - 中期: 支持本地部署模型
  - 長期: 建立私有雲部署方案
- **更新記錄**:
  - 2025-06-17: `ApiService.js` 已採用轉接頭模式，架構上支持未來快速切換至本地模型，解決此問題。

### #004 日報輸出欄位管理機制
- **創建日期**: 2025-06-16
- **狀態**: Resolved in v2.0
- **優先級**: High
- **類型**: Enhancement
- **描述**: 當需要新增或修改 Daily Report 輸出到 Sheet 的欄位時，目前的機制可能導致欄位錯亂
- **影響範圍**: 數據完整性、報告生成、歷史數據分析
- **建議解決方案**:
  - 採用類似 Google Form 的邏輯，新增欄位時自動追加到現有結構
  - 實現欄位版本控制機制
  - 建立欄位映射配置系統
  - 添加欄位變更日誌
  - 實現數據遷移工具
- **更新記錄**:
  - 2025-06-17: `SchemaService.js` 提供了對輸出表的版本控制和欄位映射，從根本上解決了此問題。

### #005 表頭配置集中化
- **創建日期**: 2025-06-16
- **狀態**: Resolved in v2.0
- **優先級**: Medium
- **類型**: Enhancement
- **描述**: 目前表頭名稱散落在多個文件中（如 DailyReport.js、BehaviorScoreManager.js），當需要修改時需要同步更新多處代碼
- **影響範圍**: 代碼維護性、配置管理、錯誤風險
- **建議解決方案**:
  - 建立統一的表頭配置管理系統
  - 將所有表頭定義集中到一個配置文件中
  - 實現表頭名稱的常量化
  - 添加表頭配置的版本控制
  - 建立表頭變更的影響分析機制
- **更新記錄**:
  - 2025-06-17: `SchemaService.js` 和 `Config.js` 共同實現了表頭的完全集中化管理。

### #006 評分計算動態調整機制
- **創建日期**: 2025-06-17
- **狀態**: Resolved in v2.0
- **優先級**: High
- **類型**: Enhancement
- **描述**: 當評分計算方式改變時，需要一個機制來重新計算歷史數據，且不一定要重新生成 LLM 分析報告
- **影響範圍**: 數據一致性、系統架構、歷史數據分析
- **建議解決方案**:
  - 實現評分計算的版本控制機制
  - 建立評分重新計算的獨立流程
  - 將評分計算與 LLM 分析解耦
  - 實現歷史數據的批量重新計算功能
  - 建立評分變更的影響分析機制
- **更新記錄**:
  - 2025-06-17: `ScoreCalculatorFactory.js` 實現了計分演算法的插件化和版本控制。`Main.js` 中的 `recalculateHistoricalScores()` 函式提供了獨立的歷史重算入口。

## 問題狀態統計
- 總問題數: 6
- 待處理: 0
- 進行中: 0
- 已解決: 6
- 已關閉: 0

## 優先級分布
- 高優先級: 4
- 中優先級: 2
- 低優先級: 0

## 問題類型分布
- Bug: 1
- Feature: 0
- Enhancement: 4
- Security: 1 