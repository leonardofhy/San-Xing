# Vision: An AI Personal Coach for Meta-Awareness

**文件版本**: 2.0
**最後更新**: 2024-06-22

這份文件旨在規劃 Meta-Awareness 系統的開發路徑，將其從一個數據記錄工具，轉變為一個積極主動、富有洞察力的 **三省 (SanXing)**。我們的目標是打造一個不僅能追蹤日常指標，更能像真正的教練為運動員提供指導一樣，為個人成長提供可執行的、數據驅動的建議。

---

## 核心設計原則：為 AI 的進化而設計

為了確保本專案在 AI 技術飛速發展的浪潮中保持長期價值，我們遵循以下設計原則。我們的目標不是重複造輪子去模仿 AI 的大腦，而是為這個大腦打造一個無可替代的、高效的宿主系統。

1.  **成為頂級的「數據營養師」**：我們的核心價值在於數據的整合、清洗和預處理。我們為 AI 提供高品質、結構化的指標和洞察，使其每一次分析都建立在一個更高的起點上，而不是浪費算力在原始數據的解讀上。
2.  **打造靈敏的「神經系統」**：我們專注於建立一個靈活的流程編排與 Prompt 建構層 (`Orchestrator`, `PromptBuilder`)。這使得我們可以隨時適應更強大的 AI 模型，僅僅透過「升級對話方式」，就能駕馭 AI 進化後的新能力。
3.  **訓練可靠的「執行肌肉」**：我們的服務（`EmailService`, `SheetAdapter` 等）是 AI 決策的可靠執行者。我們將 AI 的角色限定在「決策」，而將「執行」牢牢掌握在我們自己手中，確保動作的精準與可靠。

**結論：我們的價值與 AI 的能力成正比。AI 越強大，我們的宿主系統就越有價值。**

---

## ✅ Milestone 1: v2.0 彈性化微服務架構 (已完成)

這個基礎里程碑成功地將系統從單體應用重構為一個靈活、可擴展、易於維護的微服務架構，為未來的快速迭代和功能擴展提供了必要的技術敏捷性。

### 核心成就：

- **[✓] 模組化架構**: 將服務解耦，實現單一職責。
- **[✓] 集中化設定**: 將設定與邏輯分離 (`Config.js`, `SchemaService.js`)。
- **[✓] 事件驅動流程**: 實現了 `EventBus.js` 用於異步、解耦的流程。
- **[✓] 核心功能插件化**: 使計分模型和 AI 供應商可輕鬆替換。
- **[✓] 提升系統強韌性**: 內建重試機制和 Schema 變更偵測。

---

## ⚡ Milestone 2: 平台現代化與混合架構升級 (Next Priority)

**目標**: 為了突破 Google Apps Script 的固有瓶頸（如 6 分鐘執行限制），並為專案的長期發展和可擴展性奠定基礎，我們將目前的架構升級為一個更健壯、更靈活的混合模型。這項投資是為了給後續所有功能的開發「磨利斧頭」。

### 關鍵任務:

- **[✓] 引入 `clasp` 進行本地開發**:
  - **行動**: 設定 Google 的 `clasp` CLI 工具。這允許我們在本地使用 VS Code 等現代編輯器，用 TypeScript 編寫程式碼，並使用 Git 進行版本控制，從根本上提升開發體驗和程式碼品質。_(註: 已完成)_
- **[ ] 設計混合架構的 API 介面**:
  - **行動**: 定義 GAS（總指揮）和外部 Cloud Function（重裝兵）之間的通信協議。即，請求和響應的 JSON 格式應該是怎樣的，並確保 API Key 的安全傳遞。
- **[ ] 建立第一個外部雲端服務 (PoC)**:
  - **行動**: 在 Google Cloud Functions 或您選擇的平台上，建立一個簡單的 PoC (概念驗證) 函數，並成功地從 GAS 內部通過 `UrlFetchApp` 調用它。
- **[ ] 遷移第一個重度服務**:
  - **行動**: 將目前最耗時的服務——`ApiService` 對 LLM 的調用——從 GAS 遷移到外部 Cloud Function 中。GAS 將只負責傳遞 Prompt，並接收 AI 的回覆，以此驗證整個混合架構的暢通。

---

## 🚀 Milestone 3: 數據基礎建設與歷史分析 (規劃中)

本里程碑的重點是豐富我們的數據基礎，並將數據採集自動化。目標是確保我們擁有高品質、全面、可供分析的數據。

### 關鍵任務：

- **[✓] 歷史數據重算引擎**: 實現了強大的歷史分數回測和重算系統。_(透過 `DevTools.js` 中的 `backtestScores` 和 `recalculateHistoricalScores` 達成)_
- **[✓] 算法版本標記**: 所有計算出的分數現在都會標記其對應的算法版本，確保了數據的可追溯性。_(透過 `DevTools.js` 達成)_
- **[ ] 數據源擴展：整合 Todoist**:
  - **目標**: 透過整合 Todoist，自動化追蹤生產力和任務完成情況。
  - **行動**: 建立一個新的 `TodoistService.js`，每日獲取已完成的任務，以減少手動輸入，並為分析增加關鍵的「生產力」維度。
- **[ ] 數據 Schema 豐富化**:
  - **目標**: 使我們的數據能夠自我描述且易於機器讀取。
  - **行動**: 擴展 `SchemaService.js`，為每個欄位增加元數據 (meta)，例如 `unit` (單位，如：分鐘、小時)、`type` (資料型別) 和 `description` (欄位描述)。

---

## 💡 Milestone 4: 洞察引擎與 AI 教練系統 (規劃中)

在堅實的數據基礎之上，本里程碑專注於打造我們「AI 教練」的大腦。目標是從簡單的每日總結，進化到深度的、縱向的分析和前瞻性的建議。

### 關鍵任務：

- **[ ] 分析層：時序數據引擎與指標庫 v1**:
  - **目標**: 將原始的每日數據轉化為有意義的長期趨勢和關聯，並建立第一版的核心評估指標。
  - **行動**:
    - 建立 `AggregationService.js` 來計算關鍵的時序統計指標（例如：週/月平均值、標準差、趨勢斜率）。這個引擎將能回答「睡眠時長如何影響第二天的任務完成率？」這類問題。
    - 新建 `MetricsLibrary.js` 來定義第一版的核心指數 (例如：睡眠品質指數 v1、生產力指數 v1)，作為 AI 教練分析的基礎。
- **[ ] 洞察層：AI 教練**:
  - **目標**: 基於長期數據，生成個人化、前瞻性的建議。
  - **行動**: 開發 `WeeklyReportOrchestrator.js`，它將使用一個更複雜的「AI 教練」Prompt。這個 Prompt 會將聚合後的時序數據提供給 LLM，並要求它識別模式、點出改進領域，並提供具體、可行的建議。
- **[ ] 呈現層：可視化儀表板**:
  - **目標**: 提供直觀的趨勢和進度圖表。
  - **行動**: 建立 `DashboardService.js`，以在 Google Sheet 中自動生成並更新圖表，如睡眠趨勢、情緒波動和生產力分數。

### 預期成果：

完成這些里程碑後，系統將從一個「數位日記本」進化為一個強大的「個人成長分析平台」。它將能夠：

- **識別隱藏的關聯性**: 「我們注意到，當你的睡眠品質低於 70 分時，第二天的任務完成率平均下降 25%。」
- **提供前瞻性的情境化建議**: 「你的行為分數已連續三週呈上升趨勢，在『主動學習』方面做得很好！然而，『運動頻率』正呈下降趨勢。讓我們試著在本週安排兩次運動，以重回正軌。」
- **成為真正的 AI 夥伴**: 建議將由長期的、量化的數據驅動，使 AI 成為您個人發展旅程中一個可信賴且極具價值的教練。

---

## 🔁 Milestone 5: AI 教練的持續演進與指標精煉 (Ongoing)

**目標**: 將 AI 教練從一個靜態的產品，轉變為一個能持續學習和進化的動態系統。本里程碑的核心是建立一個反覆運算循環，不斷地從數據中發現更深刻的洞察，並精煉我們的核心評估指標。

### 關鍵流程與任務:

- **[ ] 指標的定期回顧與迭代**:
  - **行動**: 每季度對 `MetricsLibrary.js` 中的核心指數進行一次評估。基於過去三個月的數據，分析當前指標的有效性，並提出 v2、v3 版本的改進方案。
- **[ ] 建立使用者回饋循環**:
  - **行動**: 設計一種機制（例如，在郵件報告中加入「這次的分析對您有用嗎？」的評分連結），收集使用者對 AI 教練建議的有效性回饋，並將回饋數據化，用於指導指標的調整。
- **[ ] 探索新的數據維度**:
  - **行動**: 根據最新的研究和使用者需求，持續探索可被量化的新數據維度（例如：壓力水平、正念練習、飲食記錄等），並評估將其納入指標體系的可行性。
- **[ ] A/B 測試框架**:
  - **行動**: 在未來，為不同的指標算法或 AI Prompt 建立 A/B 測試的能力，以數據驅動的方式決定哪個版本的教練建議更有效。
